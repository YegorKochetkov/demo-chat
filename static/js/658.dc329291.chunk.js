"use strict";(self.webpackChunkdemo_chat=self.webpackChunkdemo_chat||[]).push([[658],{3300:function(t,e,n){n.r(e),n.d(e,{ContactsList:function(){return E}});var a=n(4165),s=n(5861),c=n(885),r=n(2791),i=n(5418),o=n(6579),u=n(4807),l=n(9809),_=n(7975),m=n(9488),d="Contact_contact__+0W6J",h="Contact_contact__name__2wp33",f="Contact_contact__message__m-cCS",v="Contact_contact__date__c1ebN",p="Contact_contact__avatar__Ei+rO",C=n(6486),x=n(184),g=(0,r.memo)((function(t){var e,n,a=t.id,s=(0,o.C)(i.K2).find((function(t){return t.id===a})),c=(0,o.T)();return(0,x.jsx)("article",{className:d,onClick:function(){return c((0,C.r1)(a))},children:s&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:p,children:(0,x.jsx)(m.Y,{photo:s.avatar,isOnline:s.isOnline})}),(0,x.jsx)("h3",{className:h,children:null===s||void 0===s?void 0:s.name}),(0,x.jsx)("p",{className:f,children:null===s||void 0===s||null===(e=s.messages[(null===s||void 0===s?void 0:s.messages.length)-1])||void 0===e?void 0:e.text}),(0,x.jsx)("p",{className:v,children:(0,_.v)(null===(n=s.messages[s.messages.length-1])||void 0===n?void 0:n.createdAt,"short")})]})},a)})),j=n(4940),N="SearchInput_searchInput__wtR0U",L=(0,r.memo)((function(){var t=(0,r.useState)(""),e=(0,c.Z)(t,2),n=e[0],a=e[1],s=(0,o.T)();return(0,r.useEffect)((function(){var t=setTimeout((function(){s((0,l.ql)(n))}),500);return function(){clearTimeout(t)}}),[s,n]),(0,x.jsx)("input",{type:"search",placeholder:"Search or start new chat",className:N,value:n,onChange:function(t){return a(t.target.value)}})})),S="ContactsList_contactsList__dyKnI",w="ContactsList_contactsList_selectedChat__IjiUY",y="ContactsList_contactsList__header__E1CjU",k="ContactsList_contactsList__main__B8aZv",O="ContactsList_contactsList__title__aScd6",U="ContactsList_contactsList__userBlock__hb-Ml",b="ContactsList_contactsList__signOut__9x8qz",I=n(7562),A=n(6871),T=n.p+"static/media/user_icon.4ada82da524b41b2c8ab.png",E=function(){var t=(0,o.T)(),e=(0,A.s0)(),n=(0,o.C)(C.x$),_=(0,o.C)(i.K2),d=(0,r.useState)(_),h=(0,c.Z)(d,2),f=h[0],v=h[1];localStorage.setItem("contacts",JSON.stringify(_));var p=(0,o.C)(u.Ai),N=(0,o.C)(l.uP);function E(){return(E=(0,s.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,I.kS)();case 3:t((0,u.GW)()),t((0,C.r1)(null)),localStorage.clear(),e("/"),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),alert("Failed to logout: "+JSON.stringify(n.t0.code));case 12:case"end":return n.stop()}}),n,null,[[0,9]])})))).apply(this,arguments)}return(0,r.useEffect)((function(){v((0,j.B)(_))}),[_]),(0,r.useEffect)((function(){var t=_.filter((function(t){return t.name.toLowerCase().includes(N)||t.messages.some((function(t){return t.text.toLowerCase().includes(N)}))}));v(t)}),[_,N]),(0,x.jsxs)("aside",{className:n?S+" "+w:S,children:[(0,x.jsxs)("header",{className:y,children:[(0,x.jsxs)("div",{className:U,children:[(0,x.jsx)(m.Y,{photo:p.avatar||T,isOnline:!0}),p.name,(0,x.jsx)("button",{type:"button",name:"sign out",className:b,onClick:function(){return E.apply(this,arguments)}})]}),(0,x.jsx)(L,{})]}),(0,x.jsxs)("main",{className:k,children:[(0,x.jsx)("h2",{className:O,children:"Chats"}),f.map((function(t){return(0,x.jsx)(g,{id:t.id},t.id)}))]})]})}},9488:function(t,e,n){n.d(e,{Y:function(){return l}});var a=n(2791),s="UserAvatar_user__n0sV2",c="UserAvatar_user__statusOnline__Cfo1o",r="UserAvatar_user__statusOffline__kyfOY",i="UserAvatar_user__photoWrapper__PBvF8",o="UserAvatar_user__photo__IElG5",u=n(184),l=(0,a.memo)((function(t){var e=t.photo,n=t.isOnline;return(0,u.jsxs)("section",{className:s,children:[(0,u.jsx)("div",{className:i,children:(0,u.jsx)("img",{src:e,alt:"User",className:o})}),(0,u.jsx)("div",{className:n?c:r})]})}))},7975:function(t,e,n){n.d(e,{v:function(){return a}});var a=function(t,e){if(t){var n=new Intl.DateTimeFormat("en-US",{day:"numeric",month:"short",year:"numeric"}),a=new Intl.DateTimeFormat("en-US",{day:"numeric",month:"numeric",year:"2-digit",hour:"numeric",minute:"numeric"}),s=new Date(t);return"short"===e?n.format(s):"long"===e?a.format(s):s.toString()}}}}]);
//# sourceMappingURL=658.dc329291.chunk.js.map