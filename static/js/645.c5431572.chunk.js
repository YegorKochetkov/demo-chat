"use strict";(self.webpackChunkdemo_chat=self.webpackChunkdemo_chat||[]).push([[645],{7645:function(t,e,n){n.r(e),n.d(e,{ContactsList:function(){return T}});var s=n(4165),a=n(5861),c=n(885),r=n(2791),i=n(5418),o=n(6579),u=n(6661),_=n(9809),l=n(7975),m=n(9488),d="Contact_contact__+0W6J",h="Contact_contact__name__2wp33",f="Contact_contact__message__m-cCS",v="Contact_contact__date__c1ebN",C="Contact_contact__avatar__Ei+rO",p=n(6486),x=n(184),j=(0,r.memo)((function(t){var e,n,s=t.id,a=(0,o.C)(i.K2).find((function(t){return t.id===s})),c=(0,o.T)();return(0,x.jsx)("article",{className:d,onClick:function(){return c((0,p.r1)(s))},children:a&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:C,children:(0,x.jsx)(m.Y,{photo:a.avatar,isOnline:a.isOnline})}),(0,x.jsx)("h3",{className:h,children:null===a||void 0===a?void 0:a.name}),(0,x.jsx)("p",{className:f,children:null===a||void 0===a||null===(e=a.messages[(null===a||void 0===a?void 0:a.messages.length)-1])||void 0===e?void 0:e.text}),(0,x.jsx)("p",{className:v,children:(0,l.v)(null===(n=a.messages[a.messages.length-1])||void 0===n?void 0:n.createdAt,"short")})]})},s)})),g=n(4940),N="SearchInput_searchInput__wtR0U",L=(0,r.memo)((function(){var t=(0,r.useState)(""),e=(0,c.Z)(t,2),n=e[0],s=e[1],a=(0,o.T)();return(0,r.useEffect)((function(){var t=setTimeout((function(){a((0,_.ql)(n))}),500);return function(){clearTimeout(t)}}),[a,n]),(0,x.jsx)("input",{type:"search",placeholder:"Search or start new chat",className:N,value:n,onChange:function(t){return s(t.target.value)}})})),S="ContactsList_contactsList__dyKnI",w="ContactsList_contactsList_selectedChat__IjiUY",y="ContactsList_contactsList__header__E1CjU",k="ContactsList_contactsList__main__B8aZv",O="ContactsList_contactsList__title__aScd6",U="ContactsList_contactsList__userBlock__hb-Ml",I="ContactsList_contactsList__signOut__9x8qz",b=n(7562),A=n(6871),T=function(){var t=(0,o.T)(),e=(0,A.s0)(),n=(0,o.C)(p.x$),l=(0,o.C)(i.K2),d=(0,r.useState)(l),h=(0,c.Z)(d,2),f=h[0],v=h[1];localStorage.setItem("contacts",JSON.stringify(l));var C=(0,o.C)(u.Ai),N=(0,o.C)(_.uP);function T(){return(T=(0,a.Z)((0,s.Z)().mark((function n(){return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,b.kS)();case 3:e("/"),t((0,p.r1)(null)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),alert("Failed to logout: "+JSON.stringify(n.t0.code));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))).apply(this,arguments)}return(0,r.useEffect)((function(){v((0,g.B)(l))}),[l]),(0,r.useEffect)((function(){var t=l.filter((function(t){return t.name.toLowerCase().includes(N)||t.messages.some((function(t){return t.text.toLowerCase().includes(N)}))}));v(t)}),[l,N]),(0,x.jsxs)("aside",{className:n?S+" "+w:S,children:[(0,x.jsxs)("header",{className:y,children:[(0,x.jsxs)("div",{className:U,children:[(0,x.jsx)(m.Y,{photo:C.avatar,isOnline:!0}),C.name,(0,x.jsx)("button",{type:"button",name:"sign out",className:I,onClick:function(){return T.apply(this,arguments)}})]}),(0,x.jsx)(L,{})]}),(0,x.jsxs)("main",{className:k,children:[(0,x.jsx)("h2",{className:O,children:"Chats"}),f.map((function(t){return(0,x.jsx)(j,{id:t.id},t.id)}))]})]})}},9488:function(t,e,n){n.d(e,{Y:function(){return _}});var s=n(2791),a="UserAvatar_user__n0sV2",c="UserAvatar_user__statusOnline__Cfo1o",r="UserAvatar_user__statusOffline__kyfOY",i="UserAvatar_user__photoWrapper__PBvF8",o="UserAvatar_user__photo__IElG5",u=n(184),_=(0,s.memo)((function(t){var e=t.photo,n=t.isOnline;return(0,u.jsxs)("section",{className:a,children:[(0,u.jsx)("div",{className:i,children:(0,u.jsx)("img",{src:e,alt:"User",className:o})}),(0,u.jsx)("div",{className:n?c:r})]})}))},7975:function(t,e,n){n.d(e,{v:function(){return s}});var s=function(t,e){if(t){var n=new Intl.DateTimeFormat("en-US",{day:"numeric",month:"short",year:"numeric"}),s=new Intl.DateTimeFormat("en-US",{day:"numeric",month:"numeric",year:"2-digit",hour:"numeric",minute:"numeric"}),a=new Date(t);return"short"===e?n.format(a):"long"===e?s.format(a):a.toString()}}}}]);
//# sourceMappingURL=645.c5431572.chunk.js.map