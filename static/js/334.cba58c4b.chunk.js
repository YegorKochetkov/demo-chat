"use strict";(self.webpackChunkdemo_chat=self.webpackChunkdemo_chat||[]).push([[334],{1334:function(e,t,s){s.r(t),s.d(t,{ChatRoom:function(){return D}});var a=s(5418),n=s(6579),r=s(9488),o=s(2791),c=s(7975),u="Message_message__fVrsq",_="Message_message__text__3qOOw",i="Message_message__myMessage__3jC02",m="Message_message__date__2Jn3R",l="Message_message__myMessageDate__g0MDW",h=s(6486),f=s(184),d=(0,o.memo)((function(e){var t=e.message,s=(0,n.C)(h.x$),a=(0,o.useRef)(null);return(0,o.useEffect)((function(){var e;null===(e=a.current)||void 0===e||e.scrollIntoView()}),[s]),(0,f.jsxs)("div",{className:u,ref:a,children:[(0,f.jsx)("p",{className:t.isMyMessage?i:_,children:t.text}),(0,f.jsx)("p",{className:t.isMyMessage?l:m,children:(0,c.v)(t.createdAt,"long")})]})})),p=s(4165),g=s(5861),v=s(885),x=function(){var e=(0,g.Z)((0,p.Z)().mark((function e(){var t;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://api.chucknorris.io/jokes/random"),{method:"GET"});case 3:return t=e.sent,e.abrupt("return",t.json());case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),j="MessageInput_messageInput__YGClS",C="MessageInput_messageInput__field__u+FZB",M="MessageInput_messageInput__submit__3CuaW",N=(0,o.memo)((function(){var e=(0,n.C)(h.x$),t=(0,n.T)(),s=(0,o.useState)(""),r=(0,v.Z)(s,2),c=r[0],u=r[1];return(0,f.jsxs)("form",{action:"",className:j,onSubmit:function(s){return function(s){if(s.preventDefault(),e&&c.trim()){var n={userId:e,isMyMessage:!0,text:c,createdAt:(new Date).toJSON()};t((0,a.Hz)(n)),u(""),setTimeout((0,g.Z)((0,p.Z)().mark((function s(){var n,r;return(0,p.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,x();case 2:n=s.sent,r={userId:e,isMyMessage:!1,text:n.value,createdAt:(new Date).toJSON()},t((0,a.Hz)(r));case 5:case"end":return s.stop()}}),s)}))),1e4)}}(s)},children:[(0,f.jsx)("input",{type:"text",placeholder:"Type your message",className:C,value:c,onChange:function(e){return u(e.target.value)}}),(0,f.jsx)("button",{type:"submit",name:"send message",className:M})]})})),y="ChatRoom_chatRoom__1x0FC",R="ChatRoom_chatRoom_selectedChat__OI2HK",I="ChatRoom_chatRoom__header__iQjXJ",w="ChatRoom_chatRoom__footer__vp6Sa",k="ChatRoom_chatRoom__main__fHlKW",b="ChatRoom_chatRoom__userInfo__H3zqD",O="ChatRoom_chatRoom__backButton__6KH55",D=function(){var e=(0,n.T)(),t=(0,n.C)(h.x$),s=(0,n.C)(a.K2),c=(0,o.useMemo)((function(){return s.find((function(e){return t===e.id}))}),[t,s]);return(0,f.jsx)(f.Fragment,{children:c&&(0,f.jsxs)("section",{className:t?y+" "+R:y,children:[(0,f.jsxs)("header",{className:I,children:[(0,f.jsx)(r.Y,{photo:c.avatar,isOnline:c.isOnline}),(0,f.jsx)("p",{className:b,children:c.name}),(0,f.jsx)("button",{type:"button",name:"back to contacts",className:O,onClick:function(){return e((0,h.r1)(null))}})]}),(0,f.jsx)("main",{className:k,children:c.messages.map((function(e,t){return(0,f.jsx)(d,{message:e},e.userId+t)}))}),(0,f.jsx)("footer",{className:w,children:(0,f.jsx)(N,{})})]})})}},9488:function(e,t,s){s.d(t,{Y:function(){return i}});var a=s(2791),n="UserAvatar_user__n0sV2",r="UserAvatar_user__statusOnline__Cfo1o",o="UserAvatar_user__statusOffline__kyfOY",c="UserAvatar_user__photoWrapper__PBvF8",u="UserAvatar_user__photo__IElG5",_=s(184),i=(0,a.memo)((function(e){var t=e.photo,s=e.isOnline;return(0,_.jsxs)("section",{className:n,children:[(0,_.jsx)("div",{className:c,children:(0,_.jsx)("img",{src:t,alt:"User",className:u})}),(0,_.jsx)("div",{className:s?r:o})]})}))},7975:function(e,t,s){s.d(t,{v:function(){return a}});var a=function(e,t){if(e){var s=new Intl.DateTimeFormat("en-US",{day:"numeric",month:"short",year:"numeric"}),a=new Intl.DateTimeFormat("en-US",{day:"numeric",month:"numeric",year:"2-digit",hour:"numeric",minute:"numeric"}),n=new Date(e);return"short"===t?s.format(n):"long"===t?a.format(n):n.toString()}}}}]);
//# sourceMappingURL=334.cba58c4b.chunk.js.map